<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!--Seccion de css-->
        <!--bootstrap-->
            <link rel="stylesheet" href="../css/bootstrap.min.css">
        <!--bootstrap-->
        <!--personal-->
            <link rel="stylesheet" href="../css/mis_reglas.css">
        <!--personal-->
        <!--font-awesome-->
            <link rel="stylesheet" href="../css/fontawesome.min.css">
            <link rel="stylesheet" href="../css/solid.min.css">
            <link rel="stylesheet" href="../css/brands.min.css">
        <!--font-awesome-->
    <!--Seccion de css-->
        <title>Ejercicios AJAX</title>
</head>

<body>
    <div class="container"><br>
        
        <button type="button" onclick="leerArchivo();"> Leer Archivo </button>
        
        <button type="button" id="btnListar">Mostrar Tabla</button>
        
    </div>
        <div class="container">
            <div id="contenido"></div>
        </div>
        
        <div class="container">
            
            <table class="table table-striped table-hover">
                <thead>
                    <th>ID</th>
                    <th>R.F.C.</th>
                    <th>Nombre</th>
                    <th>Correo</th>
                    <th>Direccion</th>
                    <th>Ciudad</th>
                    <th>Estado</th>
                    <th>Codigo Postal</th>
                    <th>Telefono</th>
                    <th>Permiso</th>
                 </thead>
                <tbody id="contenidoTabla"></tbody>
                
            </table>
        </div>
    
    <script>
        //Aprender sobre ajax
        
        document.getElementById('btnListar').addEventListener('click',function(){
            var xhrListar=(window.XMLHttpRequest)?new XMLHttpRequest():new
        ActiveXObject("Microsoft.XMLHTTP");
        
        xhrListar.onreadystatechange=function(){
            if (this.readyState==4 && this.status==200) {
                var oUsuarios=this.responseXML;
                //console.log(oUsuarios);
                var aUsuarios=oUsuarios.getElementsByTagName('record');
                var cTabla='';
                for (i=0;i<aUsuarios.length;i++) {
                    cTabla+='<tr><td>'+aUsuarios[i].getElementsByTagName('idUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('rfcUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('nombreUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('emailUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('direccionUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('ciudadUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('estadoUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('codigopostalUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('telefonoUsuario')[0].textContent + '</td>';
                    cTabla+='<td>'+aUsuarios[i].getElementsByTagName('permisoUsuario')[0].textContent + '</td></tr>';
                }//fin de for
                document.getElementById('contenidoTabla').innerHTML=cTabla;
            }//fin de if
            
            };//fin de onready 
            
            xhrListar.open('GET','../archivos/usuarios_xml.xml');
            xhrListar.send();
            
         });// fin de addevent
        
        
        
        
        
        
        
        
    function leerArchivo(){
        
        var xhrLeer=(window.XMLHttpRequest)?new XMLHttpRequest():new
        ActiveXObject("Microsoft.XMLHTTP");
            
        xhrLeer.onreadystatechange=function(){
            if (this.readyState==4 && this.status==200) {
                var sRespuesta=this.responseText;
                document.getElementById('contenido').innerHTML=sRespuesta;
                
            }// fin de readyState y status
            
        };// fin de onreadystatechanges
        
        xhrLeer.open('GET','../archivos/lectura.txt');
        xhrLeer.send();
        
    } //fin de funcion
            
    </script>

      
    
      
      <!--Seccion de javasript-->
        <!--jquery3.5.1-->
            <script type="application/x-javascript" src="../js/jquery-3.5.1.min.js"></script>
        <!--jquery3.5.1-->
        <!--bootstrap-->
            <script type="application/x-javascript" src="../js/bootstrap.min.js"></script>
            <script type="application/x-javascript" src="../js/fontawesome.min.js"></script>
            <script type="application/x-javascript" src="../js/solid.min.js"></script>
            <script type="application/x-javascript" src="../js/brands.min.js"></script>
        <!--bootstrap-->
    <!--Seccion de javasript-->
      
</body>

</html>